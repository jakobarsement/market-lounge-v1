import React, { useMemo } from 'react'
import classnames from 'classnames'
import { renderToStaticMarkup } from 'react-dom/server'
import { noop } from 'lodash'

export interface StormtrooperProps {
  alt: string
  id?: string
  className?: string
  fill?: string
  onClick?: () => void
}

const Stormtrooper: React.FC<StormtrooperProps> = ({
  alt,
  id,
  fill = '#232829',
  className,
  onClick = noop,
}) => {
  const markup = useMemo(
    () =>
      encodeURIComponent(
        renderToStaticMarkup(
          <svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              opacity="0.3"
              d="M83.9998 54.78V32C83.9998 18.744 73.2558 8 59.9998 8H35.9998C22.7438 8 11.9998 18.744 11.9998 32V55.908C9.8158 57.164 8.5918 59.58 8.5918 62.36C8.5918 64.536 9.4998 66.492 10.9438 67.84L15.1078 72L17.1918 72.02C15.6398 73.136 15.1158 75.38 16.1758 77.12L18.2318 80.496C21.7478 86.656 25.3078 88 30.9398 88H35.9998C40.4198 88 43.9998 84.42 43.9998 80H51.9998C51.9998 84.42 55.5798 88 59.9998 88H64.1878C70.0158 88 73.6998 86.608 77.3398 80.228L79.4798 76.724C80.4158 75.188 80.1598 73.252 79.0678 72L80.2078 72.012L85.0918 67.136C86.5878 65.74 87.5278 63.716 87.5278 61.46C87.5278 58.584 86.2598 56.08 83.9998 54.78Z"
              fill={fill}
            />
            <path
              d="M29.068 51.228L44 40H20L23.112 49.364C23.944 51.86 26.968 52.804 29.068 51.228Z"
              fill={fill}
            />
            <path
              d="M91.7838 59.54C91.7838 55.892 90.4038 52.624 87.9998 50.392V30.528C87.9998 29.488 87.8718 28.804 87.6758 27.984C85.7198 14.448 74.0718 4 59.9998 4H35.9998C21.9278 4 10.2798 14.448 8.31982 27.984C8.12782 28.56 7.99982 29.712 7.99982 30.352V48V50.392C5.59582 52.624 4.21582 55.892 4.21582 59.54C4.21582 62.96 5.63182 66.248 7.99582 68.456L12.1038 72.56C11.8598 74.448 12.2198 76.376 13.2158 78.004L15.4398 81.648C20.3398 90.24 26.0118 92 33.0198 92H35.9998C41.2158 92 45.6638 88.656 47.3158 84H48.6878C50.3398 88.656 54.7878 92 60.0038 92H62.9758C69.9798 92 75.6518 90.24 80.4918 81.748L82.7878 77.992C83.7798 76.364 84.1358 74.44 83.8958 72.556L87.9078 68.548C90.3678 66.248 91.7838 62.96 91.7838 59.54ZM35.9998 12H59.9998C68.1798 12 75.2078 16.948 78.3038 24H17.6958C20.7918 16.948 27.8198 12 35.9998 12ZM15.9998 32H79.9998V52.38C79.9998 53.808 80.7638 55.132 82.0038 55.844C83.1358 56.496 83.7838 57.844 83.7838 59.54C83.7838 60.756 83.2958 61.908 82.3478 62.796L79.0838 66.06L55.1158 53.732C50.7078 51.472 45.2998 51.468 40.8798 53.732L16.9198 66.06L13.5598 62.704C12.7078 61.908 12.2198 60.756 12.2198 59.54C12.2198 57.844 12.8678 56.496 13.9998 55.844C15.2358 55.132 15.9998 53.808 15.9998 52.38V32ZM73.5998 77.688C70.4998 83.12 67.9278 84 62.9718 84H59.9998C57.7958 84 55.9998 82.208 55.9998 80C55.9998 77.788 54.2078 76 51.9998 76H43.9998C41.7918 76 39.9998 77.788 39.9998 80C39.9998 82.208 38.2038 84 35.9998 84H33.0198C28.0638 84 25.4918 83.12 22.3318 77.584L20.0478 73.84C19.9598 73.692 20.0158 73.484 20.0118 73.468L44.5398 60.848C46.6958 59.736 49.3038 59.74 51.4558 60.848L75.9558 73.828L73.5998 77.688Z"
              fill={fill}
            />
            <path
              d="M72.888 49.364L76 40H52L66.932 51.228C69.032 52.804 72.056 51.86 72.888 49.364Z"
              fill={fill}
            />
          </svg>
        )
      ),
    [fill]
  )

  return (
    <img
      alt={alt}
      id={id}
      className={classnames('stormtrooper-placeholder', className)}
      onClick={onClick}
      src={`data:image/svg+xml,${markup}`}
    />
  )
}

Stormtrooper.displayName = 'Stormtrooper'
export default Stormtrooper
